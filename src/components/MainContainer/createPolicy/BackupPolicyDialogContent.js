import React from "react";
import Box from "@mui/material/Box";
import Typography from "@mui/material/Typography";
import Button from "@mui/material/Button";
import Dialog from "@mui/material/Dialog";
import DialogContent from "@mui/material/DialogContent";
import CloseOutlinedIcon from "@mui/icons-material/CloseOutlined";
import IconButton from "@mui/material/IconButton";
import Stepper from "@mui/material/Stepper";
import Step from "@mui/material/Step";
import StepLabel from "@mui/material/StepLabel";
import "../MainContainer.css";
import DialogTitle from "@mui/material/DialogTitle";
import DialogActions from "@mui/material/DialogActions";
import RetentionSettings from "./RetentionSettings";
import GeneralSettings from "./GeneralSettings";
import VMwareSettings from "./VMwareSettings";
import BackupSchedule from "./BackupSchedule";
import Grid from "@material-ui/core/Grid";

const BackupPolicyDialogContent = (props) => {
  const steps = [
    "General Purpose Use",
    "Backup Schedule",
    "Retention",
    "VMware Settings",
  ];
  const { open, activeStep, handleClose, handleReset, handleBack, handleNext } =
    props;

  const [name, setName] = React.useState("");
  const handleNameChange = (evt) => {
    setName(evt.target.value);
  };

  const handleDialogClose = () => {
    handleClose(name);
    setName("");
  };
  return (
    <Dialog
      fullWidth
      maxWidth="xl"
      open={open}
      onClose={handleClose}
      className="oui-dialog"
    >
      <DialogTitle sx={{ display: "flex" }}>
        <Box
          className="d-flex"
          sx={{ justifyContent: "flex-start", alignItems: "center" }}
        >
          <svg
            width="21"
            height="25"
            viewBox="0 0 21 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3.49951 0C3.98269 0 4.37438 0.399673 4.37438 0.892695C4.37438 1.38572 4.77406 1.78539 5.26708 1.78539H6.98119C7.47422 1.78539 7.87389 1.38572 7.87389 0.892695C7.87389 0.399673 8.26558 0 8.74876 0C9.23195 0 9.62364 0.399673 9.62364 0.892695C9.62364 1.38572 10.0233 1.78539 10.5163 1.78539H12.2305C12.7235 1.78539 13.1231 1.38572 13.1231 0.892695C13.1231 0.399673 13.5148 0 13.998 0C14.4812 0 14.8729 0.399673 14.8729 0.892695C14.8729 1.38572 15.2843 1.77057 15.7481 1.93789C16.7673 2.30562 17.4975 3.29754 17.4975 4.46347V8.41037C17.4975 8.74646 17.2618 9.02669 16.9414 9.1279C16.4073 9.29656 15.7478 8.9479 15.7478 8.38781V4.46347C15.7478 3.97045 15.3561 3.57078 14.8729 3.57078H2.62463C2.14145 3.57078 1.74975 3.97045 1.74975 4.46347V22.3174C1.74975 22.8104 2.14145 23.2101 2.62463 23.2101H5.32681C5.32889 23.2101 5.33042 23.212 5.32992 23.214C5.12327 24.0575 4.50426 24.9954 3.63586 24.9954H2.62463C1.17509 24.9954 0 23.7964 0 22.3174V4.46347C0 3.29754 0.730205 2.30562 1.74944 1.93789C2.2132 1.77057 2.62463 1.38572 2.62463 0.892695C2.62463 0.399673 3.01632 0 3.49951 0ZM12.2483 12.4977C12.5311 12.4977 12.5733 12.8423 12.3753 13.0443L11.5828 13.8529C11.3131 14.1281 10.9441 14.2831 10.5588 14.2831H5.24926C4.76608 14.2831 4.37438 13.8834 4.37438 13.3904C4.37438 12.8974 4.76608 12.4977 5.24926 12.4977H12.2483ZM6.67827 19.0947C6.86701 18.7888 7.00337 18.3947 6.75832 18.1316C6.59893 17.9606 6.37374 17.8539 6.12414 17.8539H5.24926C4.76608 17.8539 4.37438 18.2536 4.37438 18.7466C4.37438 19.2396 4.76608 19.6393 5.24926 19.6393H6.12414C6.30298 19.6393 6.44222 19.5043 6.52943 19.3481C6.57722 19.2626 6.62684 19.1781 6.67827 19.0947ZM5.24926 7.14156C4.76608 7.14156 4.37438 7.54123 4.37438 8.03425C4.37438 8.52727 4.76608 8.92695 5.24926 8.92695H12.2483C12.7315 8.92695 13.1231 8.52727 13.1231 8.03425C13.1231 7.54123 12.7315 7.14156 12.2483 7.14156H5.24926ZM16.3383 11.5247C17.4047 10.4366 19.1337 10.4366 20.2002 11.5247C21.2666 12.6129 21.2666 14.3771 20.2002 15.4653L12.6966 23.1217C12.0738 23.7572 11.2935 24.208 10.4391 24.4259L8.31983 24.9665C7.53886 25.1657 6.83145 24.4439 7.02669 23.6471L7.5565 21.4847C7.77011 20.6128 8.21192 19.8166 8.83469 19.1812L16.3383 11.5247Z"
              fill="#212121"
            />
          </svg>
          <Typography
            variant="h4"
            noWrap
            sx={{
              marginLeft: "8px",
            }}
          >
            New Backup Policy
          </Typography>
        </Box>
        <Box
          className="d-flex mt-3"
          sx={{ justifyContent: "center", width: "calc(100% - 240px)" }}
        >
          <Stepper
            sx={{ width: "80%" }}
            activeStep={activeStep}
            alternativeLabel
          >
            {steps.map((label, index) => {
              const stepProps = {};
              const labelProps = {};
              return (
                <Step key={label} {...stepProps}>
                  <StepLabel sx={{ whiteSpace: "nowrap" }} {...labelProps}>
                    {label}
                  </StepLabel>
                </Step>
              );
            })}
          </Stepper>
          <IconButton
            aria-label="filter"
            disableRipple
            className="oui-moreButton"
            sx={{
              position: "absolute",
              right: 12,
              top: 24,
            }}
            onClick={handleClose}
          >
            <CloseOutlinedIcon />
          </IconButton>
        </Box>
      </DialogTitle>
      <DialogContent dividers sx={{ background: "#ffffff" }}>
        <Grid container spacing={4} className="form-grid">
          <Grid
            container
            item
            xs={activeStep !== 1 ? 8 : 12}
            direction="column"
          >
            {activeStep === 0 && (
              <GeneralSettings
                name={name}
                handleNameChange={handleNameChange}
              />
            )}
            {activeStep === 1 && <BackupSchedule />}
            {activeStep === 2 && <RetentionSettings />}
            {activeStep === 3 && <VMwareSettings />}
          </Grid>
          {activeStep !== 1 && (
            <Grid
              container
              item
              xs={4}
              direction="column"
              className="align-items-end"
            >
              <Box className="p-0" sx={{ marginTop: "16px" }}>
                <svg
                  width="364"
                  height="426"
                  viewBox="0 0 364 426"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect width="364" height="426" rx="12" fill="#FAFAFA" />
                </svg>
                <Box
                  sx={{ position: "relative", bottom: "240px", left: "156px" }}
                >
                  <svg
                    width="66"
                    height="62"
                    viewBox="0 0 66 62"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M51.0069 1.98539C49.5793 3.11022 47.564 3.11224 46.1366 1.98712C42.1253 -1.17474 36.3277 -0.489244 33.1555 3.52195C30.3195 7.10818 30.4956 12.2345 33.571 15.6155L47.1408 30.5336C47.9087 31.3778 49.2316 31.3778 49.9995 30.5336L63.5702 15.6137C66.6448 12.2336 66.8213 7.10877 63.9868 3.52286C60.8158 -0.488813 55.0185 -1.17549 51.0069 1.98539ZM53.9174 43.1883L51.6423 37.1044C51.1316 35.7385 51.877 34.2405 52.8582 33.1617C53.3106 32.6644 54.1289 32.8219 54.3644 33.4516L57.4812 41.7864C58.2909 43.9771 58.4284 46.3617 57.8759 48.6318C57.3235 50.9019 56.1065 52.9533 54.3822 54.5209L49.6563 58.8047C47.2889 60.9145 44.2199 62.0541 41.0567 61.998C39.0631 61.988 37.0902 61.5913 35.2462 60.8297C26.7874 57.5373 17.7813 55.8983 8.7113 56.0007C7.86947 56.025 7.03669 55.8209 6.3005 55.4097C5.56431 54.9985 4.95192 54.3955 4.5277 53.6641C4.18771 53.0721 4.00872 52.4005 4.00872 51.7169C4.00872 51.0333 4.18771 50.3618 4.5277 49.7698C5.78025 48.0135 7.36657 46.5241 9.19501 45.3878C11.4749 43.9709 12.5334 40.4959 10.6376 38.5956L1.77737 29.7139C1.21401 29.1495 0.767005 28.4788 0.462003 27.7404C0.157002 27.0019 0 26.2102 0 25.4106C0 24.611 0.157002 23.8193 0.462003 23.0809C0.767005 22.3424 1.21401 21.6718 1.77737 21.1074C2.55344 20.3462 2.81736 19.0122 2.4045 18.0066C2.17329 17.4434 2.02606 16.8447 1.97139 16.2294C1.85054 14.8694 2.18891 13.5082 2.9319 12.3653C3.6749 11.2223 4.77921 10.3643 6.0667 9.92968C6.43036 9.80691 6.80265 9.71994 7.17849 9.66871C8.73106 9.4571 10.376 8.60749 11.5004 7.5161C12.0585 6.95092 12.7223 6.50236 13.4536 6.19625C14.1849 5.89015 14.9693 5.73256 15.7614 5.73256C16.5536 5.73256 17.3379 5.89015 18.0693 6.19625C18.1058 6.21154 18.1421 6.22718 18.1783 6.24318C19.1668 6.68018 20.5191 6.4318 21.2621 5.64682C22.4058 4.52175 23.9424 3.89173 25.5425 3.89173C26.0548 3.89173 26.5605 3.95629 27.0489 4.08098C27.7051 4.24852 27.9784 4.97681 27.7902 5.6274C27.5275 6.53545 27.364 7.46507 27.2992 8.39953C27.298 8.41602 27.278 8.42352 27.2663 8.4118C26.8348 7.97801 26.2496 7.73431 25.6394 7.73431C25.3372 7.73431 25.038 7.79414 24.7589 7.91038C24.4797 8.02663 24.2261 8.19701 24.0124 8.4118C23.7988 8.6266 23.6293 8.8816 23.5137 9.16224C23.398 9.44288 23.3385 9.74367 23.3385 10.0474C23.3385 10.6609 23.5809 11.2493 24.0124 11.6831L26.724 14.2144L31.8502 19.4946L36.365 24.458C36.5838 24.6986 36.7628 24.988 36.7628 25.3133C36.7628 25.5687 36.7107 25.8215 36.6097 26.0559C36.5088 26.2903 36.3611 26.5015 36.1758 26.6763C36.0019 26.8626 35.7919 27.011 35.5587 27.1125C35.3255 27.214 35.0741 27.2664 34.82 27.2664C34.5659 27.2664 34.3145 27.214 34.0813 27.1125C33.8482 27.011 33.6381 26.8626 33.4642 26.6763L23.78 16.9794L21.0684 14.2533L17.1947 10.1253C16.7769 9.72533 16.2221 9.50222 15.6452 9.50222C15.0683 9.50222 14.5135 9.72533 14.0957 10.1253C13.6888 10.5406 13.4608 11.1001 13.4608 11.6831C13.4608 12.266 13.6888 12.8255 14.0957 13.2408L24.7484 23.9502C25.108 24.3117 25.31 24.802 25.31 25.3133C25.31 25.8245 25.108 26.3148 24.7484 26.6763C24.3888 27.0378 23.9011 27.2409 23.3926 27.2409C22.8841 27.2409 22.3964 27.0378 22.0368 26.6763L14.8317 19.4718L9.40856 14.0197C9.00206 13.613 8.45192 13.3847 7.87845 13.3847C7.30498 13.3847 6.75484 13.613 6.34834 14.0197C5.94144 14.4349 5.71336 14.9945 5.71336 15.5774C5.71336 16.1603 5.94144 16.7199 6.34834 17.1351L10.4932 21.2632L18.9379 29.7918C19.2974 30.1533 19.4995 30.6436 19.4995 31.1548C19.4995 31.666 19.2974 32.1563 18.9379 32.5178C18.5783 32.8793 18.0906 33.0824 17.5821 33.0824C17.0736 33.0824 16.5859 32.8793 16.2263 32.5178L11.7715 28.0783L7.74287 24.0281C7.33637 23.6215 6.78623 23.3932 6.21276 23.3932C5.63929 23.3932 5.08915 23.6215 4.68265 24.0281C4.47258 24.2203 4.3053 24.455 4.19181 24.7167C4.07832 24.9785 4.02117 25.2614 4.02412 25.5469C4.00329 25.8635 4.05143 26.1808 4.16517 26.4768C4.27891 26.7727 4.45551 27.0402 4.68265 27.2604L20.9135 43.422C21.1811 43.6965 21.362 44.0446 21.4332 44.4223C21.5045 44.8 21.4629 45.1904 21.3138 45.5444C21.1647 45.8984 20.9146 46.2001 20.5952 46.4115C20.2857 46.6163 19.9244 46.7274 19.5544 46.7321C19.5307 46.7324 19.5102 46.7322 19.4866 46.7324C18.9509 46.7388 11.8962 46.9039 8.48213 51.213C8.09704 51.699 8.09119 52.4179 8.7113 52.4179C8.89147 52.397 9.07344 52.397 9.25361 52.4179C18.6552 52.406 27.9786 54.1354 36.7569 57.5195C38.4197 58.3061 40.2701 58.6029 42.0938 58.3755C43.9175 58.148 45.6398 57.4056 47.0609 56.2344L51.9031 51.7559C53.0592 50.6987 53.8703 49.3147 54.2298 47.7857C54.5893 46.2566 54.4804 44.654 53.9174 43.1883ZM30.0682 46.5241C31.6071 45.7529 34.0937 45.307 36.633 45.7326C39.1274 46.1507 41.5075 47.3772 43.0873 49.7595C43.6807 50.6543 44.8833 50.896 45.7733 50.2995C46.6633 49.703 46.9038 48.494 46.3104 47.5992C44.0166 44.1402 40.5861 42.4471 37.27 41.8913C33.9987 41.343 30.6747 41.8688 28.34 43.0388C27.3826 43.5186 26.9934 44.6877 27.4707 45.6502C27.9479 46.6126 29.1108 47.0039 30.0682 46.5241Z"
                      fill="#E1E1E1"
                    />
                  </svg>
                </Box>
              </Box>
            </Grid>
          )}
        </Grid>
      </DialogContent>
      <DialogActions>
        <Box className="d-flex w-100">
          <Box className="d-flex justify-content-start w-100">
            <Button
              disabled={activeStep === 0}
              variant="outlined"
              onClick={handleBack}
              startIcon={
                <svg
                  width="13"
                  height="10"
                  viewBox="0 0 13 10"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M13 5C13 5.41422 12.6642 5.75 12.25 5.75L3.46302 5.75L6.75009 8.69106C7.05878 8.96726 7.08512 9.4414 6.80893 9.75009C6.53273 10.0588 6.05859 10.0851 5.7499 9.80892L0.999904 5.55893C0.840887 5.41665 0.75 5.21338 0.75 5C0.75 4.78663 0.840886 4.58335 0.999904 4.44107L5.7499 0.191076C6.05859 -0.0851191 6.53273 -0.0587781 6.80893 0.24991C7.08512 0.558599 7.05878 1.03274 6.75009 1.30894L3.46302 4.25L12.25 4.25C12.6642 4.25 13 4.58579 13 5Z"
                    fill="white"
                  />
                  <path
                    d="M13 5C13 5.41422 12.6642 5.75 12.25 5.75L3.46302 5.75L6.75009 8.69106C7.05878 8.96726 7.08512 9.4414 6.80893 9.75009C6.53273 10.0588 6.05859 10.0851 5.7499 9.80892L0.999904 5.55893C0.840887 5.41665 0.75 5.21338 0.75 5C0.75 4.78663 0.840886 4.58335 0.999904 4.44107L5.7499 0.191076C6.05859 -0.0851191 6.53273 -0.0587781 6.80893 0.24991C7.08512 0.558599 7.05878 1.03274 6.75009 1.30894L3.46302 4.25L12.25 4.25C12.6642 4.25 13 4.58579 13 5Z"
                    fill="#1D1A1A"
                  />
                </svg>
              }
            >
              Previous
            </Button>
          </Box>
          <Box className="d-flex justify-content-end">
            <Button
              variant="outlined"
              onClick={handleClose}
              startIcon={
                <svg
                  width="12"
                  height="12"
                  viewBox="0 0 12 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0.397052 0.553789L0.46967 0.46967C0.735936 0.203403 1.1526 0.179197 1.44621 0.397052L1.53033 0.46967L6 4.939L10.4697 0.46967C10.7626 0.176777 11.2374 0.176777 11.5303 0.46967C11.8232 0.762563 11.8232 1.23744 11.5303 1.53033L7.061 6L11.5303 10.4697C11.7966 10.7359 11.8208 11.1526 11.6029 11.4462L11.5303 11.5303C11.2641 11.7966 10.8474 11.8208 10.5538 11.6029L10.4697 11.5303L6 7.061L1.53033 11.5303C1.23744 11.8232 0.762563 11.8232 0.46967 11.5303C0.176777 11.2374 0.176777 10.7626 0.46967 10.4697L4.939 6L0.46967 1.53033C0.203403 1.26406 0.179197 0.8474 0.397052 0.553789L0.46967 0.46967L0.397052 0.553789Z"
                    fill="white"
                  />
                  <path
                    d="M0.397052 0.553789L0.46967 0.46967C0.735936 0.203403 1.1526 0.179197 1.44621 0.397052L1.53033 0.46967L6 4.939L10.4697 0.46967C10.7626 0.176777 11.2374 0.176777 11.5303 0.46967C11.8232 0.762563 11.8232 1.23744 11.5303 1.53033L7.061 6L11.5303 10.4697C11.7966 10.7359 11.8208 11.1526 11.6029 11.4462L11.5303 11.5303C11.2641 11.7966 10.8474 11.8208 10.5538 11.6029L10.4697 11.5303L6 7.061L1.53033 11.5303C1.23744 11.8232 0.762563 11.8232 0.46967 11.5303C0.176777 11.2374 0.176777 10.7626 0.46967 10.4697L4.939 6L0.46967 1.53033C0.203403 1.26406 0.179197 0.8474 0.397052 0.553789L0.46967 0.46967L0.397052 0.553789Z"
                    fill="#1D1A1A"
                  />
                </svg>
              }
            >
              Cancel
            </Button>
            <Button
              variant="contained"
              onClick={
                activeStep === steps.length - 1 ? handleDialogClose : handleNext
              }
              startIcon={
                <svg
                  width="13"
                  height="10"
                  viewBox="0 0 13 10"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0 5.00001C-1.81059e-08 4.58579 0.335786 4.25001 0.75 4.25001L9.53698 4.25L6.24991 1.30894C5.94122 1.03274 5.91488 0.5586 6.19107 0.249911C6.46727 -0.0587779 6.94141 -0.0851194 7.2501 0.191076L12.0001 4.44107C12.1591 4.58335 12.25 4.78663 12.25 5C12.25 5.21338 12.1591 5.41666 12.0001 5.55894L7.2501 9.80894C6.94141 10.0851 6.46727 10.0588 6.19107 9.7501C5.91488 9.44142 5.94122 8.96727 6.24991 8.69108L9.53698 5.75L0.75 5.75001C0.335786 5.75001 1.81059e-08 5.41422 0 5.00001Z"
                    fill="white"
                  />
                  <path
                    d="M0 5.00001C-1.81059e-08 4.58579 0.335786 4.25001 0.75 4.25001L9.53698 4.25L6.24991 1.30894C5.94122 1.03274 5.91488 0.5586 6.19107 0.249911C6.46727 -0.0587779 6.94141 -0.0851194 7.2501 0.191076L12.0001 4.44107C12.1591 4.58335 12.25 4.78663 12.25 5C12.25 5.21338 12.1591 5.41666 12.0001 5.55894L7.2501 9.80894C6.94141 10.0851 6.46727 10.0588 6.19107 9.7501C5.91488 9.44142 5.94122 8.96727 6.24991 8.69108L9.53698 5.75L0.75 5.75001C0.335786 5.75001 1.81059e-08 5.41422 0 5.00001Z"
                    fill="#1D1A1A"
                  />
                </svg>
              }
            >
              {activeStep === steps.length - 1 ? "Finish" : "Next"}
            </Button>
          </Box>
        </Box>
      </DialogActions>
    </Dialog>
  );
};

export default BackupPolicyDialogContent;
